(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function G(){}function Ee(e){return e()}function be(){return Object.create(null)}function H(e){e.forEach(Ee)}function Ne(e){return typeof e=="function"}function ie(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Le(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function C(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function je(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function j(){return V(" ")}function R(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ce(e){return Array.from(e.childNodes)}function te(e,t){t=""+t,e.data!==t&&(e.data=t)}function ve(e,t){e.value=t??""}function Y(e,t,n){e.classList[n?"add":"remove"](t)}let me;function ee(e){me=e}const $=[],ae=[];let x=[];const de=[],Je=Promise.resolve();let he=!1;function Ae(){he||(he=!0,Je.then(Se))}function _e(e){x.push(e)}function Ke(e){de.push(e)}const ce=new Set;let Z=0;function Se(){if(Z!==0)return;const e=me;do{try{for(;Z<$.length;){const t=$[Z];Z++,ee(t),Pe(t.$$)}}catch(t){throw $.length=0,Z=0,t}for(ee(null),$.length=0,Z=0;ae.length;)ae.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];ce.has(n)||(ce.add(n),n())}x.length=0}while($.length);for(;de.length;)de.pop()();he=!1,ce.clear(),ee(e)}function Pe(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function Be(e){const t=[],n=[];x.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),x=t}const re=new Set;let W;function Me(){W={r:0,c:[],p:W}}function Re(){W.r||H(W.c),W=W.p}function X(e,t){e&&e.i&&(re.delete(e),e.i(t))}function ne(e,t,n,l){if(e&&e.o){if(re.has(e))return;re.add(e),W.c.push(()=>{re.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Ve(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function pe(e){e&&e.c()}function se(e,t,n,l){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),l||_e(()=>{const s=e.$$.on_mount.map(Ee).filter(Ne);e.$$.on_destroy?e.$$.on_destroy.push(...s):H(s),e.$$.on_mount=[]}),i.forEach(_e)}function oe(e,t){const n=e.$$;n.fragment!==null&&(Be(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function qe(e,t){e.$$.dirty[0]===-1&&($.push(e),Ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,n,l,r,i,s,u=[-1]){const o=me;ee(e);const f=e.$$={fragment:null,ctx:[],props:i,update:G,not_equal:r,bound:be(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:be(),dirty:u,skip_bound:!1,root:t.target||o.$$.root};s&&s(f.root);let y=!1;if(f.ctx=n?n(e,t.props||{},(_,w,...E)=>{const L=E.length?E[0]:w;return f.ctx&&r(f.ctx[_],f.ctx[_]=L)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](L),y&&qe(e,_)),w}):[],f.update(),y=!0,H(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const _=Ce(t.target);f.fragment&&f.fragment.l(_),_.forEach(S)}else f.fragment&&f.fragment.c();t.intro&&X(e.$$.fragment),se(e,t.target,t.anchor,t.customElement),Se()}ee(o)}class fe{$destroy(){oe(this,1),this.$destroy=G}$on(t,n){if(!Ne(n))return G;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!Le(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ke(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function ye(e){let t,n=(e[13]||'""')+"",l,r,i,s,u;function o(){return e[8](e[15])}return{c(){t=b("button"),l=V(n),r=j(),t.disabled=i=e[15]===e[0].key.length-1,h(t,"class","svelte-zx93nb")},m(f,y){C(f,t,y),c(t,l),c(t,r),s||(u=R(t,"click",o),s=!0)},p(f,y){e=f,y&1&&n!==(n=(e[13]||'""')+"")&&te(l,n),y&1&&i!==(i=e[15]===e[0].key.length-1)&&(t.disabled=i)},d(f){f&&S(t),s=!1,u()}}}function Ie(e){let t;return{c(){t=V("üü¢")},m(n,l){C(n,t,l)},p:G,d(n){n&&S(t)}}}function Te(e){let t,n,l,r,i,s,u;return{c(){t=b("button"),n=V("üíæ"),r=j(),i=b("button"),i.textContent="‚ùå",h(t,"title","save"),h(t,"class","editing svelte-zx93nb"),t.disabled=l=!!e[0].error,h(i,"title","cancel"),h(i,"class","editing svelte-zx93nb")},m(o,f){C(o,t,f),c(t,n),C(o,r,f),C(o,i,f),s||(u=[R(t,"click",e[9]),R(i,"click",e[10])],s=!0)},p(o,f){f&1&&l!==(l=!!o[0].error)&&(t.disabled=l)},d(o){o&&S(t),o&&S(r),o&&S(i),s=!1,H(u)}}}function we(e){let t,n=e[0].error+"",l;return{c(){t=b("mark"),l=V(n)},m(r,i){C(r,t,i),c(t,l)},p(r,i){i&1&&n!==(n=r[0].error+"")&&te(l,n)},d(r){r&&S(t)}}}function Ue(e){let t,n,l,r,i,s,u,o,f,y,_,w,E,L,U,g,P=e[0].error?"üö®":"‚úîÔ∏é",a,v,B,D=e[0].type+"",F,M,q,A,J,I,k,le,d=e[0].key,p=[];for(let m=0;m<d.length;m+=1)p[m]=ye(ke(e,d,m));function z(m,O){return O&1&&(L=null),L==null&&(L=JSON.stringify(m[0].value)!==m[0].content),L?Te:Ie}let Q=z(e,-1),T=Q(e),K=e[0].error&&we(e);return{c(){t=b("tr"),n=b("td"),l=b("a"),r=b("button"),r.textContent="ü™£",s=j(),u=b("td"),o=b("input"),y=j(),_=b("td");for(let m=0;m<p.length;m+=1)p[m].c();w=j(),E=b("td"),T.c(),U=j(),g=b("td"),a=V(P),v=j(),B=b("td"),F=V(D),M=j(),q=b("td"),A=b("textarea"),I=j(),K&&K.c(),h(r,"title","delete"),h(r,"class","svelte-zx93nb"),h(l,"id",i=e[5](e[0])),h(n,"class","svelte-zx93nb"),h(o,"type","checkbox"),o.__value=f=e[0].selected,o.value=o.__value,h(u,"class","svelte-zx93nb"),h(_,"class","key svelte-zx93nb"),Y(_,"added",e[0].added),Y(_,"updated",e[0].updated),h(E,"class","svelte-zx93nb"),h(g,"class","svelte-zx93nb"),h(B,"class","svelte-zx93nb"),h(A,"rows",J=e[4](e[0].content)),h(A,"class","svelte-zx93nb"),h(q,"class","svelte-zx93nb"),h(t,"class","svelte-zx93nb"),Y(t,"highlighted",e[0].highlighted)},m(m,O){C(m,t,O),c(t,n),c(n,l),c(l,r),c(t,s),c(t,u),c(u,o),o.checked=e[0].selected,c(t,y),c(t,_);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(_,null);c(t,w),c(t,E),T.m(E,null),c(t,U),c(t,g),c(g,a),c(t,v),c(t,B),c(B,F),c(t,M),c(t,q),c(q,A),ve(A,e[0].content),c(q,I),K&&K.m(q,null),k||(le=[R(r,"click",e[6]),R(o,"change",e[7]),R(A,"input",e[11]),R(A,"keyup",e[12])],k=!0)},p(m,[O]){if(O&1&&i!==(i=m[5](m[0]))&&h(l,"id",i),O&1&&f!==(f=m[0].selected)&&(o.__value=f,o.value=o.__value),O&1&&(o.checked=m[0].selected),O&9){d=m[0].key;let N;for(N=0;N<d.length;N+=1){const ge=ke(m,d,N);p[N]?p[N].p(ge,O):(p[N]=ye(ge),p[N].c(),p[N].m(_,null))}for(;N<p.length;N+=1)p[N].d(1);p.length=d.length}O&1&&Y(_,"added",m[0].added),O&1&&Y(_,"updated",m[0].updated),Q===(Q=z(m,O))&&T?T.p(m,O):(T.d(1),T=Q(m),T&&(T.c(),T.m(E,null))),O&1&&P!==(P=m[0].error?"üö®":"‚úîÔ∏é")&&te(a,P),O&1&&D!==(D=m[0].type+"")&&te(F,D),O&1&&J!==(J=m[4](m[0].content))&&h(A,"rows",J),O&1&&ve(A,m[0].content),m[0].error?K?K.p(m,O):(K=we(m),K.c(),K.m(q,null)):K&&(K.d(1),K=null),O&1&&Y(t,"highlighted",m[0].highlighted)},i:G,o:G,d(m){m&&S(t),je(p,m),T.d(),K&&K.d(),k=!1,H(le)}}}function De(e,t,n){let{row:l}=t,{remove:r}=t,{put:i}=t,{refresh:s}=t;const u=g=>{if(!g)return 0;const P=Math.max(1,g.split(`
`).length),a=g.split(`
`).filter(v=>v.length>100).map(v=>v.length/100).reduce((v,B)=>v+B,0)+1;return Math.max(P,a)},o=g=>g.key.join("@"),f=()=>r(l.key);function y(){l.selected=this.checked,n(0,l)}const _=g=>s(l.key.slice(0,+g+1)),w=async()=>{try{n(0,l.value=JSON.parse(l.content),l),console.log("put",l.key,l.value),await i(l.key,l.value),n(0,l.updated=!0,l),n(0,l.error="",l)}catch(g){n(0,l.error=g.message,l)}},E=()=>{n(0,l.content=JSON.stringify(l.value),l),n(0,l.error="",l)};function L(){l.content=this.value,n(0,l)}const U=g=>{g.key==="Escape"&&n(0,l.content=JSON.stringify(l.value),l);try{n(0,l.type=typeof JSON.parse(l.content),l),n(0,l.error="",l)}catch(P){n(0,l.error=P.message,l)}};return e.$$set=g=>{"row"in g&&n(0,l=g.row),"remove"in g&&n(1,r=g.remove),"put"in g&&n(2,i=g.put),"refresh"in g&&n(3,s=g.refresh)},[l,r,i,s,u,o,f,y,_,w,E,L,U]}class Fe extends fe{constructor(t){super(),ue(this,t,De,Ue,ie,{row:0,remove:1,put:2,refresh:3})}}function ze(e,t,n){const l=e.slice();return l[15]=t[n],l[16]=t,l[17]=n,l}function Ge(e){let t,n,l,r,i;return{c(){t=b("button"),n=V("‚ûï"),h(t,"class","add svelte-1hufz63"),h(t,"title",l="delete "+(e[6]?`${e[6]} `:"")+"item"+(e[6]===1?" ":"s"))},m(s,u){C(s,t,u),c(t,n),r||(i=R(t,"click",e[11]),r=!0)},p(s,u){u&64&&l!==(l="delete "+(s[6]?`${s[6]} `:"")+"item"+(s[6]===1?" ":"s"))&&h(t,"title",l)},d(s){s&&S(t),r=!1,i()}}}function He(e){let t,n,l,r,i,s;return{c(){t=b("button"),n=V("üóëÔ∏è"),h(t,"title",l="delete "+(e[6]?`${e[6]} `:"")+"item"+(e[6]===1?" ":"s")),t.disabled=r=e[6]<1,h(t,"class","svelte-1hufz63")},m(u,o){C(u,t,o),c(t,n),i||(s=R(t,"click",e[10]),i=!0)},p(u,o){o&64&&l!==(l="delete "+(u[6]?`${u[6]} `:"")+"item"+(u[6]===1?" ":"s"))&&h(t,"title",l),o&64&&r!==(r=u[6]<1)&&(t.disabled=r)},d(u){u&&S(t),i=!1,s()}}}function Qe(e){let t;return{c(){t=V("key")},m(n,l){C(n,t,l)},p:G,d(n){n&&S(t)}}}function We(e){let t=e[1].join(" / ")+"",n,l,r,i,s;return{c(){n=V(t),l=j(),r=b("button"),r.textContent="‚ùå",h(r,"title","clear filter"),h(r,"class","svelte-1hufz63")},m(u,o){C(u,n,o),C(u,l,o),C(u,r,o),i||(s=R(r,"click",e[13]),i=!0)},p(u,o){o&2&&t!==(t=u[1].join(" / ")+"")&&te(n,t)},d(u){u&&S(n),u&&S(l),u&&S(r),i=!1,s()}}}function Oe(e){let t,n,l;function r(s){e[14](s,e[15],e[16],e[17])}let i={remove:e[2],put:e[3],refresh:e[4]};return e[15]!==void 0&&(i.row=e[15]),t=new Fe({props:i}),ae.push(()=>Ve(t,"row",r)),{c(){pe(t.$$.fragment)},m(s,u){se(t,s,u),l=!0},p(s,u){e=s;const o={};u&4&&(o.remove=e[2]),u&8&&(o.put=e[3]),u&16&&(o.refresh=e[4]),!n&&u&1&&(n=!0,o.row=e[15],Ke(()=>n=!1)),t.$set(o)},i(s){l||(X(t.$$.fragment,s),l=!0)},o(s){ne(t.$$.fragment,s),l=!1},d(s){oe(t,s)}}}function Xe(e){let t,n,l,r,i,s,u,o,f,y,_,w,E,L,U,g,P,a,v,B;function D(d,p){return d[6]>0?He:Ge}let F=D(e),M=F(e);function q(d,p){return d[1].length?We:Qe}let A=q(e),J=A(e),I=e[0],k=[];for(let d=0;d<I.length;d+=1)k[d]=Oe(ze(e,I,d));const le=d=>ne(k[d],1,1,()=>{k[d]=null});return{c(){t=b("table"),n=b("tr"),l=b("th"),M.c(),r=j(),i=b("th"),s=b("input"),u=j(),o=b("th"),J.c(),f=j(),y=b("th"),y.textContent="‚â†",_=j(),w=b("th"),E=j(),L=b("th"),L.textContent="type",U=j(),g=b("th"),g.textContent="value",P=j();for(let d=0;d<k.length;d+=1)k[d].c();h(l,"class","svelte-1hufz63"),h(s,"type","checkbox"),h(i,"class","svelte-1hufz63"),h(o,"class","svelte-1hufz63"),h(y,"class","svelte-1hufz63"),h(w,"class","svelte-1hufz63"),h(L,"class","svelte-1hufz63"),h(g,"class","svelte-1hufz63"),h(t,"class","svelte-1hufz63")},m(d,p){C(d,t,p),c(t,n),c(n,l),M.m(l,null),c(n,r),c(n,i),c(i,s),s.checked=e[5],c(n,u),c(n,o),J.m(o,null),c(n,f),c(n,y),c(n,_),c(n,w),c(n,E),c(n,L),c(n,U),c(n,g),c(t,P);for(let z=0;z<k.length;z+=1)k[z]&&k[z].m(t,null);a=!0,v||(B=[R(s,"change",e[12]),R(s,"change",e[7])],v=!0)},p(d,[p]){if(F===(F=D(d))&&M?M.p(d,p):(M.d(1),M=F(d),M&&(M.c(),M.m(l,null))),p&32&&(s.checked=d[5]),A===(A=q(d))&&J?J.p(d,p):(J.d(1),J=A(d),J&&(J.c(),J.m(o,null))),p&29){I=d[0];let z;for(z=0;z<I.length;z+=1){const Q=ze(d,I,z);k[z]?(k[z].p(Q,p),X(k[z],1)):(k[z]=Oe(Q),k[z].c(),X(k[z],1),k[z].m(t,null))}for(Me(),z=I.length;z<k.length;z+=1)le(z);Re()}},i(d){if(!a){for(let p=0;p<I.length;p+=1)X(k[p]);a=!0}},o(d){k=k.filter(Boolean);for(let p=0;p<k.length;p+=1)ne(k[p]);a=!1},d(d){d&&S(t),M.d(),J.d(),je(k,d),v=!1,H(B)}}}function Ye(e,t,n){let l,{data:r}=t,{prefix:i}=t,{remove:s}=t,{put:u}=t,{refresh:o}=t,f=!1;function y(){r.forEach(a=>a.selected=f),n(0,r=[...r])}function _(a){r.find(v=>v.key.join("@")===a.join("@")).highlighted=!0,n(0,r=[...r])}function w(a){r.find(v=>v.key.join("@")===a.join("@")).added=!0,n(0,r=[...r])}function E(){const a=r.filter(v=>v.selected);a.length!==0&&confirm(`delete ${a.length} items?`)&&a.forEach(v=>s(v.key))}const L=async()=>{const a=prompt(`input the key to add
(either a string with spaces as separators or a JSON array)`).trim();if(a.length===0)return;let v=a.split(/\s+/);if(a[0]==="[")try{v=JSON.parse(a)}catch(B){alert(B.message);return}await u(v,""),window.location.href="#"+v.join("@"),_(v),w(v)};function U(){f=this.checked,n(5,f)}const g=()=>o([]);function P(a,v,B,D){B[D]=a,n(0,r)}return e.$$set=a=>{"data"in a&&n(0,r=a.data),"prefix"in a&&n(1,i=a.prefix),"remove"in a&&n(2,s=a.remove),"put"in a&&n(3,u=a.put),"refresh"in a&&n(4,o=a.refresh)},e.$$.update=()=>{e.$$.dirty&1&&n(6,l=r.filter(a=>a.selected).length)},[r,i,s,u,o,f,l,y,_,w,E,L,U,g,P]}class Ze extends fe{constructor(t){super(),ue(this,t,Ye,Xe,ie,{data:0,prefix:1,remove:2,put:3,refresh:4})}}function $e(e){let t,n,l;return n=new Ze({props:{data:e[0],prefix:e[1],remove:e[2],put:e[3],refresh:e[4]}}),{c(){t=b("main"),pe(n.$$.fragment),h(t,"class","svelte-1q79jhc")},m(r,i){C(r,t,i),se(n,t,null),l=!0},p(r,[i]){const s={};i&1&&(s.data=r[0]),i&2&&(s.prefix=r[1]),n.$set(s)},i(r){l||(X(n.$$.fragment,r),l=!0)},o(r){ne(n.$$.fragment,r),l=!1},d(r){r&&S(t),oe(n)}}}function xe(e,t,n){const l=_=>{const w=new URL(new URL(import.meta.url).origin);return w.pathname=_,w.toString()},r=(_,w)=>l(_)+"?"+w.map(E=>"prefix="+E).join("&"),i=async(_=[])=>await(await fetch(r("kv",_))).json(),s=async _=>{await fetch(r("kv",_),{method:"DELETE"}),await y(f)},u=async(_,w)=>{await fetch(r("kv",_),{method:"PUT",body:JSON.stringify(w)}),await y(f)};let o=[],f=[];const y=async _=>{n(1,f=_),n(0,o=[...(await i(f)).map(w=>({...w,content:JSON.stringify(w.value)}))])};return y(f),[o,f,s,u,y]}class et extends fe{constructor(t){super(),ue(this,t,xe,$e,ie,{})}}function tt(e){let t,n,l;return n=new et({}),{c(){t=b("main"),pe(n.$$.fragment)},m(r,i){C(r,t,i),se(n,t,null),l=!0},p:G,i(r){l||(X(n.$$.fragment,r),l=!0)},o(r){ne(n.$$.fragment,r),l=!1},d(r){r&&S(t),oe(n)}}}class nt extends fe{constructor(t){super(),ue(this,t,null,tt,ie,{})}}new nt({target:document.getElementById("app")});
