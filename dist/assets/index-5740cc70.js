(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function G(){}function je(e){return e()}function ve(){return Object.create(null)}function H(e){e.forEach(je)}function Ne(e){return typeof e=="function"}function se(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ce(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function C(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function Se(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function N(){return V(" ")}function R(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ae(e){return Array.from(e.childNodes)}function te(e,t){t=""+t,e.data!==t&&(e.data=t)}function ke(e,t){e.value=t??""}function Y(e,t,n){e.classList[n?"add":"remove"](t)}let pe;function ee(e){pe=e}const $=[],de=[];let x=[];const he=[],Je=Promise.resolve();let _e=!1;function Ke(){_e||(_e=!0,Je.then(Le))}function me(e){x.push(e)}function Pe(e){he.push(e)}const ae=new Set;let Z=0;function Le(){if(Z!==0)return;const e=pe;do{try{for(;Z<$.length;){const t=$[Z];Z++,ee(t),Be(t.$$)}}catch(t){throw $.length=0,Z=0,t}for(ee(null),$.length=0,Z=0;de.length;)de.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];ae.has(n)||(ae.add(n),n())}x.length=0}while($.length);for(;he.length;)he.pop()();_e=!1,ae.clear(),ee(e)}function Be(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}function Me(e){const t=[],n=[];x.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),x=t}const re=new Set;let W;function Re(){W={r:0,c:[],p:W}}function Ve(){W.r||H(W.c),W=W.p}function X(e,t){e&&e.i&&(re.delete(e),e.i(t))}function ne(e,t,n,l){if(e&&e.o){if(re.has(e))return;re.add(e),W.c.push(()=>{re.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function qe(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ge(e){e&&e.c()}function ie(e,t,n,l){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),l||me(()=>{const s=e.$$.on_mount.map(je).filter(Ne);e.$$.on_destroy?e.$$.on_destroy.push(...s):H(s),e.$$.on_mount=[]}),o.forEach(me)}function ue(e,t){const n=e.$$;n.fragment!==null&&(Me(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ie(e,t){e.$$.dirty[0]===-1&&($.push(e),Ke(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(e,t,n,l,r,o,s,u=[-1]){const i=pe;ee(e);const f=e.$$={fragment:null,ctx:[],props:o,update:G,not_equal:r,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:ve(),dirty:u,skip_bound:!1,root:t.target||i.$$.root};s&&s(f.root);let y=!1;if(f.ctx=n?n(e,t.props||{},(_,w,...O)=>{const L=O.length?O[0]:w;return f.ctx&&r(f.ctx[_],f.ctx[_]=L)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](L),y&&Ie(e,_)),w}):[],f.update(),y=!0,H(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const _=Ae(t.target);f.fragment&&f.fragment.l(_),_.forEach(S)}else f.fragment&&f.fragment.c();t.intro&&X(e.$$.fragment),ie(e,t.target,t.anchor,t.customElement),Le()}ee(i)}class ce{$destroy(){ue(this,1),this.$destroy=G}$on(t,n){if(!Ne(n))return G;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!Ce(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const oe=e=>JSON.stringify(e,null,4);function ye(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function we(e){let t,n=(e[13]||'""')+"",l,r,o,s,u;function i(){return e[8](e[15])}return{c(){t=b("button"),l=V(n),r=N(),t.disabled=o=e[15]===e[0].key.length-1,h(t,"class","svelte-zx93nb")},m(f,y){C(f,t,y),c(t,l),c(t,r),s||(u=R(t,"click",i),s=!0)},p(f,y){e=f,y&1&&n!==(n=(e[13]||'""')+"")&&te(l,n),y&1&&o!==(o=e[15]===e[0].key.length-1)&&(t.disabled=o)},d(f){f&&S(t),s=!1,u()}}}function Te(e){let t;return{c(){t=V("üü¢")},m(n,l){C(n,t,l)},p:G,d(n){n&&S(t)}}}function Ue(e){let t,n,l,r,o,s,u;return{c(){t=b("button"),n=V("üíæ"),r=N(),o=b("button"),o.textContent="‚ùå",h(t,"title","save"),h(t,"class","editing svelte-zx93nb"),t.disabled=l=!!e[0].error,h(o,"title","cancel"),h(o,"class","editing svelte-zx93nb")},m(i,f){C(i,t,f),c(t,n),C(i,r,f),C(i,o,f),s||(u=[R(t,"click",e[9]),R(o,"click",e[10])],s=!0)},p(i,f){f&1&&l!==(l=!!i[0].error)&&(t.disabled=l)},d(i){i&&S(t),i&&S(r),i&&S(o),s=!1,H(u)}}}function ze(e){let t,n=e[0].error+"",l;return{c(){t=b("mark"),l=V(n)},m(r,o){C(r,t,o),c(t,l)},p(r,o){o&1&&n!==(n=r[0].error+"")&&te(l,n)},d(r){r&&S(t)}}}function De(e){let t,n,l,r,o,s,u,i,f,y,_,w,O,L,U,g,P=e[0].error?"üö®":"‚úîÔ∏é",a,v,B,D=e[0].type+"",F,M,q,J,A,I,k,le,d=e[0].key,p=[];for(let m=0;m<d.length;m+=1)p[m]=we(ye(e,d,m));function z(m,E){return E&1&&(L=null),L==null&&(L=oe(m[0].value)!==m[0].content),L?Ue:Te}let Q=z(e,-1),T=Q(e),K=e[0].error&&ze(e);return{c(){t=b("tr"),n=b("td"),l=b("a"),r=b("button"),r.textContent="ü™£",s=N(),u=b("td"),i=b("input"),y=N(),_=b("td");for(let m=0;m<p.length;m+=1)p[m].c();w=N(),O=b("td"),T.c(),U=N(),g=b("td"),a=V(P),v=N(),B=b("td"),F=V(D),M=N(),q=b("td"),J=b("textarea"),I=N(),K&&K.c(),h(r,"title","delete"),h(r,"class","svelte-zx93nb"),h(l,"id",o=e[5](e[0])),h(n,"class","svelte-zx93nb"),h(i,"type","checkbox"),i.__value=f=e[0].selected,i.value=i.__value,h(u,"class","svelte-zx93nb"),h(_,"class","key svelte-zx93nb"),Y(_,"added",e[0].added),Y(_,"updated",e[0].updated),h(O,"class","svelte-zx93nb"),h(g,"class","svelte-zx93nb"),h(B,"class","svelte-zx93nb"),h(J,"rows",A=e[4](e[0].content)),h(J,"class","svelte-zx93nb"),h(q,"class","svelte-zx93nb"),h(t,"class","svelte-zx93nb"),Y(t,"highlighted",e[0].highlighted)},m(m,E){C(m,t,E),c(t,n),c(n,l),c(l,r),c(t,s),c(t,u),c(u,i),i.checked=e[0].selected,c(t,y),c(t,_);for(let j=0;j<p.length;j+=1)p[j]&&p[j].m(_,null);c(t,w),c(t,O),T.m(O,null),c(t,U),c(t,g),c(g,a),c(t,v),c(t,B),c(B,F),c(t,M),c(t,q),c(q,J),ke(J,e[0].content),c(q,I),K&&K.m(q,null),k||(le=[R(r,"click",e[6]),R(i,"change",e[7]),R(J,"input",e[11]),R(J,"keyup",e[12])],k=!0)},p(m,[E]){if(E&1&&o!==(o=m[5](m[0]))&&h(l,"id",o),E&1&&f!==(f=m[0].selected)&&(i.__value=f,i.value=i.__value),E&1&&(i.checked=m[0].selected),E&9){d=m[0].key;let j;for(j=0;j<d.length;j+=1){const be=ye(m,d,j);p[j]?p[j].p(be,E):(p[j]=we(be),p[j].c(),p[j].m(_,null))}for(;j<p.length;j+=1)p[j].d(1);p.length=d.length}E&1&&Y(_,"added",m[0].added),E&1&&Y(_,"updated",m[0].updated),Q===(Q=z(m,E))&&T?T.p(m,E):(T.d(1),T=Q(m),T&&(T.c(),T.m(O,null))),E&1&&P!==(P=m[0].error?"üö®":"‚úîÔ∏é")&&te(a,P),E&1&&D!==(D=m[0].type+"")&&te(F,D),E&1&&A!==(A=m[4](m[0].content))&&h(J,"rows",A),E&1&&ke(J,m[0].content),m[0].error?K?K.p(m,E):(K=ze(m),K.c(),K.m(q,null)):K&&(K.d(1),K=null),E&1&&Y(t,"highlighted",m[0].highlighted)},i:G,o:G,d(m){m&&S(t),Se(p,m),T.d(),K&&K.d(),k=!1,H(le)}}}function Fe(e,t,n){let{row:l}=t,{remove:r}=t,{put:o}=t,{refresh:s}=t;const u=g=>{if(!g)return 0;const P=Math.max(1,g.split(`
`).length),a=g.split(`
`).filter(v=>v.length>100).map(v=>v.length/100).reduce((v,B)=>v+B,0)+1;return Math.max(P,a)},i=g=>g.key.join("@"),f=()=>r(l.key);function y(){l.selected=this.checked,n(0,l)}const _=g=>s(l.key.slice(0,+g+1)),w=async()=>{try{n(0,l.value=JSON.parse(l.content),l),console.log("put",l.key,l.value),await o(l.key,l.value),n(0,l.updated=!0,l),n(0,l.error="",l)}catch(g){n(0,l.error=g.message,l)}},O=()=>{n(0,l.content=oe(l.value),l),n(0,l.error="",l)};function L(){l.content=this.value,n(0,l)}const U=g=>{g.key==="Escape"&&n(0,l.content=oe(l.value),l);try{n(0,l.type=typeof JSON.parse(l.content),l),n(0,l.error="",l)}catch(P){n(0,l.error=P.message,l)}};return e.$$set=g=>{"row"in g&&n(0,l=g.row),"remove"in g&&n(1,r=g.remove),"put"in g&&n(2,o=g.put),"refresh"in g&&n(3,s=g.refresh)},[l,r,o,s,u,i,f,y,_,w,O,L,U]}class Ge extends ce{constructor(t){super(),fe(this,t,Fe,De,se,{row:0,remove:1,put:2,refresh:3})}}function Ee(e,t,n){const l=e.slice();return l[15]=t[n],l[16]=t,l[17]=n,l}function He(e){let t,n,l,r,o;return{c(){t=b("button"),n=V("‚ûï"),h(t,"class","add svelte-1hufz63"),h(t,"title",l="delete "+(e[6]?`${e[6]} `:"")+"item"+(e[6]===1?" ":"s"))},m(s,u){C(s,t,u),c(t,n),r||(o=R(t,"click",e[11]),r=!0)},p(s,u){u&64&&l!==(l="delete "+(s[6]?`${s[6]} `:"")+"item"+(s[6]===1?" ":"s"))&&h(t,"title",l)},d(s){s&&S(t),r=!1,o()}}}function Qe(e){let t,n,l,r,o,s;return{c(){t=b("button"),n=V("üóëÔ∏è"),h(t,"title",l="delete "+(e[6]?`${e[6]} `:"")+"item"+(e[6]===1?" ":"s")),t.disabled=r=e[6]<1,h(t,"class","svelte-1hufz63")},m(u,i){C(u,t,i),c(t,n),o||(s=R(t,"click",e[10]),o=!0)},p(u,i){i&64&&l!==(l="delete "+(u[6]?`${u[6]} `:"")+"item"+(u[6]===1?" ":"s"))&&h(t,"title",l),i&64&&r!==(r=u[6]<1)&&(t.disabled=r)},d(u){u&&S(t),o=!1,s()}}}function We(e){let t;return{c(){t=V("key")},m(n,l){C(n,t,l)},p:G,d(n){n&&S(t)}}}function Xe(e){let t=e[1].join(" / ")+"",n,l,r,o,s;return{c(){n=V(t),l=N(),r=b("button"),r.textContent="‚ùå",h(r,"title","clear filter"),h(r,"class","svelte-1hufz63")},m(u,i){C(u,n,i),C(u,l,i),C(u,r,i),o||(s=R(r,"click",e[13]),o=!0)},p(u,i){i&2&&t!==(t=u[1].join(" / ")+"")&&te(n,t)},d(u){u&&S(n),u&&S(l),u&&S(r),o=!1,s()}}}function Oe(e){let t,n,l;function r(s){e[14](s,e[15],e[16],e[17])}let o={remove:e[2],put:e[3],refresh:e[4]};return e[15]!==void 0&&(o.row=e[15]),t=new Ge({props:o}),de.push(()=>qe(t,"row",r)),{c(){ge(t.$$.fragment)},m(s,u){ie(t,s,u),l=!0},p(s,u){e=s;const i={};u&4&&(i.remove=e[2]),u&8&&(i.put=e[3]),u&16&&(i.refresh=e[4]),!n&&u&1&&(n=!0,i.row=e[15],Pe(()=>n=!1)),t.$set(i)},i(s){l||(X(t.$$.fragment,s),l=!0)},o(s){ne(t.$$.fragment,s),l=!1},d(s){ue(t,s)}}}function Ye(e){let t,n,l,r,o,s,u,i,f,y,_,w,O,L,U,g,P,a,v,B;function D(d,p){return d[6]>0?Qe:He}let F=D(e),M=F(e);function q(d,p){return d[1].length?Xe:We}let J=q(e),A=J(e),I=e[0],k=[];for(let d=0;d<I.length;d+=1)k[d]=Oe(Ee(e,I,d));const le=d=>ne(k[d],1,1,()=>{k[d]=null});return{c(){t=b("table"),n=b("tr"),l=b("th"),M.c(),r=N(),o=b("th"),s=b("input"),u=N(),i=b("th"),A.c(),f=N(),y=b("th"),y.textContent="‚â†",_=N(),w=b("th"),O=N(),L=b("th"),L.textContent="type",U=N(),g=b("th"),g.textContent="value",P=N();for(let d=0;d<k.length;d+=1)k[d].c();h(l,"class","svelte-1hufz63"),h(s,"type","checkbox"),h(o,"class","svelte-1hufz63"),h(i,"class","svelte-1hufz63"),h(y,"class","svelte-1hufz63"),h(w,"class","svelte-1hufz63"),h(L,"class","svelte-1hufz63"),h(g,"class","svelte-1hufz63"),h(t,"class","svelte-1hufz63")},m(d,p){C(d,t,p),c(t,n),c(n,l),M.m(l,null),c(n,r),c(n,o),c(o,s),s.checked=e[5],c(n,u),c(n,i),A.m(i,null),c(n,f),c(n,y),c(n,_),c(n,w),c(n,O),c(n,L),c(n,U),c(n,g),c(t,P);for(let z=0;z<k.length;z+=1)k[z]&&k[z].m(t,null);a=!0,v||(B=[R(s,"change",e[12]),R(s,"change",e[7])],v=!0)},p(d,[p]){if(F===(F=D(d))&&M?M.p(d,p):(M.d(1),M=F(d),M&&(M.c(),M.m(l,null))),p&32&&(s.checked=d[5]),J===(J=q(d))&&A?A.p(d,p):(A.d(1),A=J(d),A&&(A.c(),A.m(i,null))),p&29){I=d[0];let z;for(z=0;z<I.length;z+=1){const Q=Ee(d,I,z);k[z]?(k[z].p(Q,p),X(k[z],1)):(k[z]=Oe(Q),k[z].c(),X(k[z],1),k[z].m(t,null))}for(Re(),z=I.length;z<k.length;z+=1)le(z);Ve()}},i(d){if(!a){for(let p=0;p<I.length;p+=1)X(k[p]);a=!0}},o(d){k=k.filter(Boolean);for(let p=0;p<k.length;p+=1)ne(k[p]);a=!1},d(d){d&&S(t),M.d(),A.d(),Se(k,d),v=!1,H(B)}}}function Ze(e,t,n){let l,{data:r}=t,{prefix:o}=t,{remove:s}=t,{put:u}=t,{refresh:i}=t,f=!1;function y(){r.forEach(a=>a.selected=f),n(0,r=[...r])}function _(a){r.find(v=>v.key.join("@")===a.join("@")).highlighted=!0,n(0,r=[...r])}function w(a){r.find(v=>v.key.join("@")===a.join("@")).added=!0,n(0,r=[...r])}function O(){const a=r.filter(v=>v.selected);a.length!==0&&confirm(`delete ${a.length} items?`)&&a.forEach(v=>s(v.key))}const L=async()=>{const a=prompt(`input the key to add
(either a string with spaces as separators or a JSON array)`).trim();if(a.length===0)return;let v=a.split(/\s+/);if(a[0]==="[")try{v=JSON.parse(a)}catch(B){alert(B.message);return}await u(v,""),window.location.href="#"+v.join("@"),_(v),w(v)};function U(){f=this.checked,n(5,f)}const g=()=>i([]);function P(a,v,B,D){B[D]=a,n(0,r)}return e.$$set=a=>{"data"in a&&n(0,r=a.data),"prefix"in a&&n(1,o=a.prefix),"remove"in a&&n(2,s=a.remove),"put"in a&&n(3,u=a.put),"refresh"in a&&n(4,i=a.refresh)},e.$$.update=()=>{e.$$.dirty&1&&n(6,l=r.filter(a=>a.selected).length)},[r,o,s,u,i,f,l,y,_,w,O,L,U,g,P]}class $e extends ce{constructor(t){super(),fe(this,t,Ze,Ye,se,{data:0,prefix:1,remove:2,put:3,refresh:4})}}function xe(e){let t,n,l;return n=new $e({props:{data:e[0],prefix:e[1],remove:e[2],put:e[3],refresh:e[4]}}),{c(){t=b("main"),ge(n.$$.fragment),h(t,"class","svelte-1q79jhc")},m(r,o){C(r,t,o),ie(n,t,null),l=!0},p(r,[o]){const s={};o&1&&(s.data=r[0]),o&2&&(s.prefix=r[1]),n.$set(s)},i(r){l||(X(n.$$.fragment,r),l=!0)},o(r){ne(n.$$.fragment,r),l=!1},d(r){r&&S(t),ue(n)}}}function et(e,t,n){const l=_=>{const w=new URL(new URL(import.meta.url).origin);return w.pathname=_,w.toString()},r=(_,w)=>l(_)+"?"+w.map(O=>"prefix="+O).join("&"),o=async(_=[])=>await(await fetch(r("kv",_))).json(),s=async _=>{await fetch(r("kv",_),{method:"DELETE"}),await y(f)},u=async(_,w)=>{await fetch(r("kv",_),{method:"PUT",body:JSON.stringify(w)}),await y(f)};let i=[],f=[];const y=async _=>{n(1,f=_),n(0,i=[...(await o(f)).map(w=>({...w,content:oe(w.value)}))])};return y(f),[i,f,s,u,y]}class tt extends ce{constructor(t){super(),fe(this,t,et,xe,se,{})}}function nt(e){let t,n,l;return n=new tt({}),{c(){t=b("main"),ge(n.$$.fragment)},m(r,o){C(r,t,o),ie(n,t,null),l=!0},p:G,i(r){l||(X(n.$$.fragment,r),l=!0)},o(r){ne(n.$$.fragment,r),l=!1},d(r){r&&S(t),ue(n)}}}class lt extends ce{constructor(t){super(),fe(this,t,null,nt,se,{})}}new lt({target:document.getElementById("app")});
